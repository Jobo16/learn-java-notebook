### 一、 核心定义

Java 内部类（Inner Class）是**定义在另一个类（外部类）内部的类**，它的核心特点是「可以直接访问外部类的所有字段和方法（包括`private`修饰的）」，本质是为了**实现更好的封装、解决 Java 单继承的限制、简化代码结构**。

### 二、 4 种常见内部类（核心分类 + 关键要点）

这是内部类的核心内容，重点掌握每种的定义、使用场景和核心特性：

#### 1. 成员内部类（最基础，非静态内部类）

- **定义**：直接定义在外部类中，无`static`修饰（类似外部类的实例字段 / 方法）。
- **核心特性**：
    
    1. 属于**外部类对象**，而非外部类本身，必须先创建外部类对象，才能创建内部类对象。
    2. 可以直接访问外部类的「实例字段 / 方法」和「静态字段 / 方法」（包括`private`）。
    3. 不能定义静态字段和静态方法（`static final`常量除外，因为编译期确定值）。
    
- **创建语法**：`外部类对象.new 内部类()`
- **使用场景**：和外部类关系紧密，仅为外部类提供辅助功能，不单独被其他类使用。
- **简单示例**：
    
    java
    
    运行
    
    ```java
    public class Outer {
        private String outerName = "外部类";
        
        // 成员内部类
        public class Inner {
            public void sayHello() {
                // 直接访问外部类private字段
                System.out.println("访问外部类：" + outerName);
            }
        }
        
        // 测试
        public static void main(String[] args) {
            // 1. 先创建外部类对象
            Outer outer = new Outer();
            // 2. 再创建内部类对象
            Outer.Inner inner = outer.new Inner();
            inner.sayHello(); // 输出：访问外部类：外部类
        }
    }
    ```
    

#### 2. 静态内部类（嵌套类，Static Nested Class）

- **定义**：定义在外部类中，有`static`修饰（类似外部类的静态字段 / 方法）。
- **核心特性**：
    
    1. 属于**外部类本身**，而非外部类对象，无需创建外部类对象，可直接创建内部类对象。
    2. 只能访问外部类的「静态字段 / 方法」（包括`private`），无法访问实例字段 / 方法（因为没有外部类对象）。
    3. 可以正常定义静态字段、静态方法和实例成员，不受限制。
    
- **创建语法**：`外部类.内部类()`（直接通过外部类名创建）
- **使用场景**：仅作为外部类的辅助工具类，无需依赖外部类对象，可单独被其他类使用（日常开发中比成员内部类更常用）。
- **简单示例**：
    
    java
    
    运行
    
    ```
    public class Outer {
        private static String outerStaticName = "外部类静态属性";
        
        // 静态内部类
        public static class StaticInner {
            public void sayHello() {
                // 只能访问外部类静态成员
                System.out.println("访问外部类静态属性：" + outerStaticName);
            }
        }
        
        // 测试
        public static void main(String[] args) {
            // 直接创建静态内部类对象，无需外部类对象
            Outer.StaticInner staticInner = new Outer.StaticInner();
            staticInner.sayHello(); // 输出：访问外部类静态属性：外部类静态属性
        }
    }
    ```
    

#### 3. 局部内部类（方法内部类）

- **定义**：定义在外部类的**方法或代码块内**（类似局部变量），无访问修饰符（`public/private`等均不可用）。
- **核心特性**：
    
    1. 作用域仅限于当前方法 / 代码块内，外部无法访问，也无法被其他类引用。
    2. 可以直接访问外部类的所有字段 / 方法，同时可以访问方法内的`final`修饰的局部变量（Java 8 + 自动隐式为`final`，无需手动写，但不能修改该变量值）。
    3. 不能定义静态成员。
    
- **创建语法**：在方法内直接`new 内部类()`，仅在方法内使用。
- **使用场景**：仅在当前方法内需要一个辅助类，且无需被外部复用，用于隐藏类的可见性（最不常用）。
- **简单示例**：
    
    java
    
    运行
    
    ```
    public class Outer {
        private String outerName = "外部类";
        
        public void outerMethod() {
            String methodVar = "方法局部变量";
            
            // 局部内部类（定义在方法内）
            class LocalInner {
                public void sayHello() {
                    System.out.println("访问外部类：" + outerName);
                    System.out.println("访问方法局部变量：" + methodVar);
                }
            }
            
            // 方法内创建并使用局部内部类
            LocalInner localInner = new LocalInner();
            localInner.sayHello();
        }
        
        // 测试
        public static void main(String[] args) {
            new Outer().outerMethod();
            // 输出：
            // 访问外部类：外部类
            // 访问方法局部变量：方法局部变量
        }
    }
    ```
    

#### 4. 匿名内部类（最常用，无名称内部类）

- **定义**：没有类名的局部内部类，通常配合接口或抽象类使用，在`new`的时候直接实现接口方法 / 重写抽象类方法。
- **核心特性**：
    
    1. 本质是「局部内部类」，作用域仅限于当前代码行，创建对象的同时完成类的实现 / 重写。
    2. 无需定义类名，语法简洁，一次性使用（无法复用）。
    3. 可以访问外部类所有成员，以及方法内`final`修饰的局部变量（Java 8 + 自动隐式`final`）。
    
- **创建语法**：`new 接口/抽象类() { 实现/重写方法 }`
- **使用场景**：临时需要实现一个接口 / 抽象类，且该实现只使用一次（如事件监听、线程创建、集合排序等，日常开发中使用频率极高）。
- **简单示例**：
    
    java
    
    运行
    
    ```
    // 定义一个简单接口
    interface Greeting {
        void sayHi();
    }
    
    public class Outer {
        public void outerMethod() {
            // 匿名内部类：直接实现Greeting接口，同时创建对象
            Greeting greeting = new Greeting() {
                @Override
                public void sayHi() {
                    System.out.println("匿名内部类实现接口，Hello World!");
                }
            };
            greeting.sayHi(); // 输出：匿名内部类实现接口，Hello World!
        }
        
        // 测试
        public static void main(String[] args) {
            new Outer().outerMethod();
        }
    }
    ```
    

### 三、 核心共性与注意事项

1. **访问权限**：内部类可以访问外部类的所有成员（`private`也可），外部类访问内部类成员则需要创建内部类对象（静态内部类除外，直接通过类名访问）。
2. **字节码文件**：内部类编译后会生成独立的字节码文件，命名规则为「`外部类名$内部类名.class`」（匿名内部类为「`外部类名$数字.class`」）。
3. **封装性**：内部类可以隐藏在外部类内部，不对外暴露，提高代码的安全性和可维护性。
4. **避免滥用**：除了静态内部类和匿名内部类，其他内部类（成员、局部）尽量少用，否则会增加代码的复杂度，不利于后续维护。

### 总结

1. Java 内部类分为 4 种：**成员内部类、静态内部类、局部内部类、匿名内部类**，其中**静态内部类和匿名内部类**是日常开发的重点。
2. 核心价值是**简化封装、访问外部类私有成员、解决单继承限制**，匿名内部类更是简化了一次性接口 / 抽象类的实现代码。
3. 关键区分：是否带`static`（成员 vs 静态）、是否有类名（局部 vs 匿名）、作用域范围（类内 vs 方法内）。