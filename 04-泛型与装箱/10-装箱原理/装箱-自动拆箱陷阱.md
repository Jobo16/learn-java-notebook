---
title: 装箱-自动拆箱陷阱
category: 04-泛型与装箱
topic: 10-装箱原理
created: 2026-01-28
reviewed: 2026-02-02
tags: [java, 泛型与装箱]
status: active
---


### 涓€銆?鍏堟槑纭細鎷嗙鐨勬牳蹇冨畾涔?
鍏堝洖椤惧搴斿叧绯伙紝鏂逛究鐞嗚В锛?
- 瑁呯锛氬熀鏈被鍨?鈫?鍖呰绫诲瀷锛堝彉鎴愬璞★紝鏀寔`null`銆侀泦鍚堝瓨鍌ㄧ瓑锛?- 鎷嗙锛氬寘瑁呯被鍨?鈫?鍩烘湰绫诲瀷锛堝彉鍥炵畝鍗曟暟鍊硷紝鏀寔绠楁湳杩愮畻銆佸熀鏈被鍨嬭祴鍊肩瓑锛?
鑷姩鎷嗙鍚屾牱鏄?*缂栬瘧鍣ㄨ娉曠硸**锛岀紪璇戝櫒浼氳嚜鍔ㄨ皟鐢ㄥ寘瑁呯被鐨刞xxxValue()`鏂规硶锛堝`intValue()`銆乣doubleValue()`锛夛紝灏嗗寘瑁呯被鍨嬪璞¤浆鎹负瀵瑰簲鐨勫熀鏈被鍨嬫暟鍊硷紝鏃犻渶寮€鍙戣€呮墜鍔ㄨ皟鐢ㄣ€?
### 浜屻€?涓轰粈涔堥渶瑕佹媶绠憋紵锛堟牳蹇冨満鏅級

鍖呰绫诲瀷鐨勬湰璐ㄦ槸銆屽璞°€嶏紝瀹冪殑璁捐鐩殑鏄В鍐冲熀鏈被鍨嬫棤娉曚綔涓哄璞′娇鐢ㄧ殑闂锛屼絾鍚屾椂涔熷甫鏉ヤ簡闄愬埗 鈥斺€?*寰堝鍩虹鎿嶄綔鍙敮鎸佸熀鏈被鍨嬶紝涓嶆敮鎸佸璞＄被鍨?*锛屾鏃跺氨闇€瑕佹媶绠辨潵鎵撻€氫袱鑰呯殑澹佸瀿锛屼富瑕佹湁 3 涓牳蹇冨満鏅細

#### 鍦烘櫙 1锛?鍖呰绫诲瀷闇€瑕佸弬涓庛€岀畻鏈繍绠椼€嶏紙+銆?銆?銆? 绛夛級

Java 鐨勭畻鏈繍绠楀彧鑳戒綔鐢ㄤ簬**鍩烘湰鏁版嵁绫诲瀷**锛坄int`銆乣double`绛夛級锛屼笉鑳界洿鎺ヤ綔鐢ㄤ簬鍖呰绫诲瀷瀵硅薄锛坄Integer`銆乣Double`绛夛級銆?
濡傛灉娌℃湁鎷嗙锛屼笅闈㈢殑浠ｇ爜浼氱洿鎺ョ紪璇戞姤閿欙紱鏈変簡鑷姩鎷嗙锛岀紪璇戝櫒浼氬厛鎶婂寘瑁呯被鍨嬭浆涓哄熀鏈被鍨嬶紝鍐嶆墽琛岃繍绠椼€?
java

杩愯

```
public class UnboxingCalcDemo {
    public static void main(String[] args) {
        // 鍏堣绠憋細寰楀埌鍖呰绫诲瀷瀵硅薄
        Integer a = 100; // 鑷姩瑁呯
        Integer b = 200; // 鑷姩瑁呯
        
        // 闇€姹傦細涓や釜鏁板€肩浉鍔狅紙绠楁湳杩愮畻锛?        // 鑷姩鎷嗙锛氱紪璇戝櫒鍏堝皢 a銆乥 杞负 int 鍩烘湰绫诲瀷锛屽啀鎵ц + 杩愮畻
        int sum = a + b; 
        
        System.out.println(sum); // 杈撳嚭锛?00
    }
}
```

**搴曞眰鎷嗚В**锛氫笂闈㈢殑`a + b`锛岀紪璇戝櫒浼氳嚜鍔ㄨ浆鎹负锛?
java

杩愯

```
int sum = a.intValue() + b.intValue();
```

濡傛灉娌℃湁鎷嗙锛岀洿鎺ュ`Integer`瀵硅薄鎵ц`+`杩愮畻锛岀紪璇戝櫒鏃犳硶璇嗗埆锛屼細鎻愮ず銆岃繍绠楃 '+' 涓嶈兘搴旂敤浜?'java.lang.Integer'銆?java.lang.Integer'銆嶃€?
#### 鍦烘櫙 2锛?鍖呰绫诲瀷闇€瑕佽祴鍊肩粰銆屽熀鏈被鍨嬪彉閲忋€?
鍙橀噺鐨勮祴鍊艰姹傘€屽乏鍙充袱杈圭殑绫诲瀷鍏煎銆嶏紝鍖呰绫诲瀷瀵硅薄涓嶈兘鐩存帴璧嬪€肩粰鍩烘湰绫诲瀷鍙橀噺锛屾鏃堕渶瑕佹媶绠辫浆鎹㈢被鍨嬨€?
java

杩愯

```
public class UnboxingAssignDemo {
    public static void main(String[] args) {
        // 鍖呰绫诲瀷瀵硅薄
        Integer wrapperNum = 300; // 鑷姩瑁呯
        
        // 闇€姹傦細灏嗗寘瑁呯被鍨嬬殑鍊艰祴鍊肩粰 int 鍩烘湰绫诲瀷鍙橀噺
        // 鑷姩鎷嗙锛氱紪璇戝櫒灏?wrapperNum 杞负 int 鍩烘湰绫诲瀷锛屽啀璧嬪€?        int basicNum = wrapperNum; 
        
        System.out.println(basicNum); // 杈撳嚭锛?00
    }
}
```

**搴曞眰鎷嗚В**锛歚int basicNum = wrapperNum;` 缂栬瘧鍣ㄤ細鑷姩杞崲涓猴細

java

杩愯

```
int basicNum = wrapperNum.intValue();
```

濡傛灉娌℃湁鎷嗙锛岀洿鎺ヨ祴鍊间細缂栬瘧鎶ラ敊锛屾彁绀恒€屼笉鍏煎鐨勭被鍨嬶細java.lang.Integer 鏃犳硶杞崲涓?int銆嶃€?
#### 鍦烘櫙 3锛?鏂规硶鍙傛暟 / 杩斿洖鍊间负銆屽熀鏈被鍨嬨€嶏紝浼犲叆 / 杩斿洖鍖呰绫诲瀷鏃?
濡傛灉鏂规硶鐨勫弬鏁版槸鍩烘湰绫诲瀷锛岃€屼綘鍙湁鍖呰绫诲瀷瀵硅薄锛涙垨鑰呮柟娉曡繑鍥炲€兼槸鍩烘湰绫诲瀷锛岃€屼綘鎯宠繑鍥炲寘瑁呯被鍨嬪璞★紝姝ゆ椂闇€瑕佹媶绠卞畬鎴愮被鍨嬪尮閰嶃€?
java

杩愯

```
public class UnboxingMethodDemo {
    // 鏂规硶鍙傛暟锛歩nt 鍩烘湰绫诲瀷锛堜粎鎺ユ敹鍩烘湰绫诲瀷锛?    public static void printInt(int num) {
        System.out.println("浼犲叆鐨勫熀鏈被鍨嬫暟鍊硷細" + num);
    }
    
    // 鏂规硶杩斿洖鍊硷細double 鍩烘湰绫诲瀷锛堜粎杩斿洖鍩烘湰绫诲瀷锛?    public static double getDouble() {
        // 鍖呰绫诲瀷瀵硅薄
        Double wrapperDouble = 3.14; // 鑷姩瑁呯
        // 鑷姩鎷嗙锛氬皢鍖呰绫诲瀷杞负 double 鍩烘湰绫诲瀷锛屽啀杩斿洖
        return wrapperDouble;
    }
    
    public static void main(String[] args) {
        Integer wrapperNum = 400; // 鑷姩瑁呯
        // 鑷姩鎷嗙锛氬皢 wrapperNum 杞负 int 鍩烘湰绫诲瀷锛屼紶鍏ユ柟娉?        printInt(wrapperNum);
        
        double basicDouble = getDouble();
        System.out.println("杩斿洖鐨勫熀鏈被鍨嬫暟鍊硷細" + basicDouble);
    }
}
```

杩愯缁撴灉锛?
plaintext

```
浼犲叆鐨勫熀鏈被鍨嬫暟鍊硷細400
杩斿洖鐨勫熀鏈被鍨嬫暟鍊硷細3.14
```

### 涓夈€?鎷嗙鐨勬敞鎰忎簨椤癸紙鏍稿績閬垮潙鐐癸級

1. **鎷嗙鍓嶅繀椤诲垽鏂寘瑁呯被鍨嬫槸鍚︿负`null`锛屽惁鍒欎細鎶涘嚭`NullPointerException`**
    
    鍖呰绫诲瀷鍙互璧嬪€间负`null`锛岃€屽熀鏈被鍨嬩笉鑳戒负`null`銆傚鏋滃`null`鐨勫寘瑁呯被鍨嬪璞¤繘琛屾媶绠憋紝缂栬瘧鍣ㄥ皾璇曡皟鐢╜xxxValue()`鏂规硶鏃讹紝浼氬洜涓哄璞′负`null`鑰屾姏鍑虹┖鎸囬拡寮傚父锛岃繖鏄紑鍙戜腑鏈€甯歌鐨勫潙銆?    
    java
    
    杩愯
    
    ```
    public class UnboxingNullDemo {
        public static void main(String[] args) {
            Integer wrapperNum = null; // 鍖呰绫诲瀷涓?null
            // 涓嬮潰杩欒浠ｇ爜缂栬瘧閫氳繃锛屼絾杩愯鏃舵姏鍑?NullPointerException
            int basicNum = wrapperNum; // 灏濊瘯瀵?null 鎷嗙锛屾姤閿?        }
    }
    ```
    
    瑙ｅ喅鏂规锛氭媶绠卞墠鍏堝仛闈炵┖鍒ゆ柇锛?    
    java
    
    杩愯
    
    ```
    if (wrapperNum != null) {
        int basicNum = wrapperNum;
    }
    ```
    
2. **鑷姩鎷嗙鏄紪璇戝櫒浼樺寲锛屽簳灞傝皟鐢╜xxxValue()`鏂规硶**
    
    涓嶅悓鍖呰绫诲瀷瀵瑰簲涓嶅悓鐨勬媶绠辨柟娉曪紝鏃犻渶鎵嬪姩璁板繂锛岀紪璇戝櫒浼氳嚜鍔ㄥ尮閰嶏細
    
    |鍖呰绫诲瀷|鎷嗙鏂规硶|瀵瑰簲鍩烘湰绫诲瀷|
    |---|---|---|
    |`Integer`|`intValue()`|`int`|
    |`Double`|`doubleValue()`|`double`|
    |`Boolean`|`booleanValue()`|`boolean`|
    
3. **鎷嗙涓嶄細褰卞搷鍖呰绫诲瀷鐨勭紦瀛樻満鍒?*
    
    缂撳瓨鏄寘瑁呯被鍨嬪璞＄殑鐗规€э紝鎷嗙鏄皢瀵硅薄杞负鍩烘湰鏁板€硷紝涓庣紦瀛樻棤鍏筹紱鍚庣画鍐嶆瑁呯鏃讹紝浠嶄細閬靛惊缂撳瓨瑙勫垯銆?    

### 鎬荤粨

1. 鎷嗙鐨勬牳蹇冪洰鐨勬槸**瑙ｅ喅鍖呰绫诲瀷鏃犳硶鍙備笌鍩烘湰绫诲瀷涓撳睘鎿嶄綔鐨勯檺鍒?*锛岃鍖呰绫诲瀷鍜屽熀鏈被鍨嬭兘澶熺伒娲讳簰閫氥€?2. 鏍稿績浣跨敤鍦烘櫙锛氱畻鏈繍绠椼€佸熀鏈被鍨嬪彉閲忚祴鍊笺€佸尮閰嶅熀鏈被鍨嬬殑鏂规硶鍙傛暟 / 杩斿洖鍊笺€?3. 鍏抽敭閬垮潙鐐癸細鎷嗙鍓嶅繀椤诲垽鏂寘瑁呯被鍨嬫槸鍚︿负`null`锛岄伩鍏嶆姏鍑虹┖鎸囬拡寮傚父銆?4. 鑷姩鎷嗙鏄紪璇戝櫒璇硶绯栵紝搴曞眰璋冪敤鍖呰绫荤殑`xxxValue()`鏂规硶锛岀畝鍖栦簡鎵嬪姩杞崲鐨勭箒鐞愪唬鐮併€
