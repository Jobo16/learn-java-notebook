---
title: 语法-占位符与printf
category: 01-基础语法
topic: 30-语法元素
created: 2026-01-27
reviewed: 2026-02-02
tags: [java, 基础语法]
status: active
---

### 一、核心概念

1. **占位符格式**：基本格式为 `%[标志][宽度][.精度]类型符`，其中 **`%` 和 `类型符` 是必须的 **，其余部分（标志、宽度、精度）是可选的，用于细化格式。
2. **作用**：用占位符占据输出位置，后续传入对应类型的参数，参数会按照占位符的格式要求转换后填充到对应位置，实现 “格式与数据分离”。
3. **对应关系**：占位符的数量必须和后续传入的参数数量、类型一一对应，否则会抛出异常（比如用 `%d` 接收字符串，用 4 个占位符只传 3 个参数）。

### 二、常用核心占位符（按类型分类，重点掌握）

这是日常开发中最常用的占位符，优先掌握这些即可满足大部分场景需求。

#### 1. 整数相关占位符

用于格式化 `byte`、`short`、`int`、`long` 类型的整数，核心类型符有 3 个：

| 占位符       | 含义                                      | 示例                                                        |
| --------- | --------------------------------------- | --------------------------------------------------------- |
| `%d`      | 以**十进制整数**形式输出（最常用）                     | `printf("%d", 123)` → 输出 `123`                            |
| `%o`      | 以**八进制整数**形式输出（无前导 0）                   | `printf("%o", 8)` → 输出 `10`（8 的八进制是 10）                   |
| `%x`/`%X` | 以**十六进制整数**形式输出，`%x` 小写，`%X` 大写（无前导 0x） | `printf("%x", 16)` → 输出 `10`；`printf("%X", 17)` → 输出 `11` |

示例代码：

java

运行

```
public class PlaceholderTest {
    public static void main(String[] args) {
        int num = 25;
        System.out.printf("十进制：%d%n", num);
        System.out.printf("八进制：%o%n", num);
        System.out.printf("十六进制（小写）：%x%n", num);
        System.out.printf("十六进制（大写）：%X%n", num);
    }
}
```

运行结果：

plaintext

```
十进制：25
八进制：31
十六进制（小写）：19
十六进制（大写）：19
```

#### 2. 浮点数相关占位符

用于格式化 `float`、`double` 类型的浮点数，核心类型符有 2 个：

| 占位符       | 含义                             | 示例                                         |
| --------- | ------------------------------ | ------------------------------------------ |
| `%f`      | 以**十进制小数**形式输出（默认保留 6 位小数）     | `printf("%f", 3.14)` → 输出 `3.140000`       |
| `%e`/`%E` | 以**科学计数法**形式输出，`%e` 小写，`%E` 大写 | `printf("%e", 123.45)` → 输出 `1.234500e+02` |

**关键可选配置：. 精度**

对于浮点数，`%.nf` 表示保留 `n` 位小数，且自动四舍五入，这是非常常用的功能（比如你之前遇到的保留 3 位小数）。

示例代码：

java

运行

```
public class PlaceholderTest {
    public static void main(String[] args) {
        double pi = 3.1415926535;
        System.out.printf("默认保留6位小数：%f%n", pi);
        System.out.printf("保留3位小数：%.3f%n", pi); // 四舍五入
        System.out.printf("保留1位小数：%.1f%n", pi);
        System.out.printf("科学计数法（小写）：%e%n", pi);
        System.out.printf("科学计数法（大写）：%E%n", pi);
    }
}
```

运行结果：

plaintext

```
默认保留6位小数：3.141593
保留3位小数：3.142
保留1位小数：3.1
科学计数法（小写）：3.141593e+00
科学计数法（大写）：3.141593E+00
```

#### 3. 字符串 / 字符相关占位符

|占位符|含义|示例|
|---|---|---|
|`%s`|格式化**字符串**（支持所有对象，本质调用`toString()`方法）|`printf("%s", "Hello World")` → 输出 `Hello World`|
|`%c`|格式化**单个字符**|`printf("%c", 'A')` → 输出 `A`|

`%s` 是万能占位符，因为它可以接收任意类型的参数（整数、浮点数、自定义对象等），会自动调用该对象的 `toString()` 方法转换为字符串输出，灵活性极高。

示例代码：

java

运行

```
public class PlaceholderTest {
    public static void main(String[] args) {
        String str = "Java";
        char ch = 'J';
        int num = 123;
        // 格式化字符串
        System.out.printf("字符串：%s%n", str);
        // 格式化字符
        System.out.printf("字符：%c%n", ch);
        // %s 接收整数（万能占位符）
        System.out.printf("万能占位符接收整数：%s%n", num);
    }
}
```

运行结果：

plaintext

```
字符串：Java
字符：J
万能占位符接收整数：123
```

### 三、可选扩展配置（标志、宽度）

这些配置用于进一步细化输出格式，日常开发中按需使用，重点掌握 “宽度” 和 “补零标志”。

#### 1. 宽度（`%nd`/`%ns`/`%nf`）

`n` 是一个整数，表示输出内容的**最小宽度**：

- 如果数据长度小于 `n`，则会在左侧补空格（默认右对齐），填充到 `n` 个字符长度。
- 如果数据长度大于等于 `n`，则按实际长度输出，不会截断。

示例代码：

java

运行

```
public class PlaceholderTest {
    public static void main(String[] args) {
        int num = 123;
        String str = "Java";
        // 整数：最小宽度5，不足补空格
        System.out.printf("整数（宽度5）：[%5d]%n", num);
        // 字符串：最小宽度8，不足补空格
        System.out.printf("字符串（宽度8）：[%8s]%n", str);
        // 浮点数：最小宽度10，保留2位小数，不足补空格
        System.out.printf("浮点数（宽度10，保留2位小数）：[%10.2f]%n", 3.14);
    }
}
```

运行结果（中括号用于直观展示宽度）：

plaintext

```
整数（宽度5）：[  123]
字符串（宽度8）：[    Java]
浮点数（宽度10，保留2位小数）：[      3.14]
```

#### 2. 标志（常用 2 个）

- 标志 `-`：左对齐（默认右对齐），当设置了宽度时，不足部分在右侧补空格。
- 标志 `0`：对于整数和浮点数，当设置了宽度且数据长度不足时，左侧补 `0`（而非空格）。

示例代码：

java

运行

```
public class PlaceholderTest {
    public static void main(String[] args) {
        int num = 123;
        // 标志 -：左对齐（宽度5）
        System.out.printf("整数（左对齐，宽度5）：[%5d] → [%-5d]%n", num, num);
        // 标志 0：补零（宽度5）
        System.out.printf("整数（补零，宽度5）：[%05d]%n", num);
        // 浮点数补零（宽度10，保留2位小数）
        System.out.printf("浮点数（补零，宽度10，保留2位小数）：[%010.2f]%n", 3.14);
    }
}
```

运行结果：

plaintext

```
整数（左对齐，宽度5）：[  123] → [123  ]
整数（补零，宽度5）：[00123]
浮点数（补零，宽度10，保留2位小数）：[0000003.14]
```

### 四、注意事项

1. **类型匹配**：占位符的类型必须和传入参数的类型兼容，比如 `%d` 不能接收 `double` 类型，`%c` 不能接收字符串。
    
    - 错误示例：`printf("%d", 3.14)` → 编译报错（类型不匹配）。
    
2. **参数数量匹配**：占位符的数量必须等于后续传入的参数数量，少传或多传都会抛出 `MissingFormatArgumentException` 异常。
3. **浮点数精度**：`%.nf` 会自动四舍五入，若需要截断（不四舍五入），需要额外处理逻辑。
4. **换行符**：`printf` 不会自动换行，如需换行，可在格式化字符串中添加 `%n`（跨平台兼容）或 `\n`。
5. **自定义对象**：使用 `%s` 格式化自定义对象时，建议重写该对象的 `toString()` 方法，否则会输出 “类名 @哈希值” 的默认格式。

### 五、拓展：`String.format()`

占位符不仅可以用于 `System.out.printf()`，还可以用于 `String.format()`，两者的占位符语法完全一致，区别是 `String.format()` 不会直接输出，而是返回格式化后的字符串。

示例代码：

java

运行

```
public class PlaceholderTest {
    public static void main(String[] args) {
        int a = 2;
        int b = 3;
        // 格式化字符串，不直接输出
        String result = String.format("%d+%d=%d", a, b, a + b);
        // 后续可对result进行处理（存储、传递等）
        System.out.println(result);
    }
}
```

运行结果：

plaintext

```
2+3=5
```

### 总结

1. 占位符核心格式是 `%[标志][宽度][.精度]类型符`，`%` 和类型符是必选，其余是可选扩展。
2. 常用核心占位符：`%d`（十进制整数）、`%.nf`（保留 n 位小数的浮点数）、`%s`（万能字符串）。
3. 关键扩展：宽度控制输出长度，`-` 左对齐，`0` 补零，`%.nf` 控制浮点数精度并四舍五入。
4. 核心注意点：占位符与参数的数量、类型必须一一对应，避免运行时异常。

